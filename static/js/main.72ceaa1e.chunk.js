(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(85)},39:function(e,t,n){},43:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},44:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(26),r=n.n(s),i=(n(39),n(1)),c=n.n(i),l=n(5),u=n(27),m=n(28),d=n(30),h=n(29),p=n(31),f=(n(43),new(0,window.Ipfs)({repo:"ipfs"+Math.random(),EXPERIMENTAL:{pubsub:!0},config:{Addresses:{Swarm:["/dns4/localhost/tcp/9090/ws/p2p-websocket-star/"]}}}));f.on("ready",Object(l.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.id();case 2:t=e.sent,console.log("ipfs is ready",t.id);case 4:case"end":return e.stop()}},e,this)})));var g=f,v=(n(44),n(46)),w=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).room=null,n.peerToSend=null,n.state={room:"",messages:[],newMessage:""},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"onMsgClick",value:function(){var e=this.state.messages;e.push({from:"You",data:this.state.newMessage}),this.setState({messages:e}),this.room.broadcast(this.state.newMessage)}},{key:"onClick",value:function(){var e=this,t=v(g,this.state.room);this.room=t,t.on("peer joined",function(n){e.peerToSend=n,console.log("Peer joined the room",n),t.sendTo(n,"Privet suka")}),t.on("peer left",function(e){console.log("Peer left...",e)}),t.on("subscribed",function(){console.log("Now connected!")}),t.on("message",function(){var t=Object(l.a)(c.a.mark(function t(n){var a,o,s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=n.from,o=n.data,(s=e.state.messages).push({from:a,data:o.toString()}),e.setState({messages:s}),console.log("message received from ",a,": ",o.toString());case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this;console.log("fix broadcast");var t=[];return this.state.messages.forEach(function(e,n){var a="You"===e.from?"red":"white";t.push(o.a.createElement("div",{style:{padding:"5px",color:a},key:n},"From: ",e.from,o.a.createElement("br",null),"Message: ",e.data))}),o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},"Current room: ",this.state.room," ",o.a.createElement("br",null),o.a.createElement("div",null,"New Room id: ",o.a.createElement("input",{onChange:function(t){return e.setState({room:t.target.value})},value:this.state.room}),o.a.createElement("button",{onClick:this.onClick.bind(this)},"Create/Join room")),o.a.createElement("div",null,"Room messages: ",o.a.createElement("br",null),t," ",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),"Send message ",o.a.createElement("input",{onChange:function(t){return e.setState({newMessage:t.target.value})},value:this.state.newMessage}),o.a.createElement("button",{onClick:this.onMsgClick.bind(this)},"Send message"))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,2,1]]]);
//# sourceMappingURL=main.72ceaa1e.chunk.js.map